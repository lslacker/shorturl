{"version":3,"sources":["app/core.cljs"],"mappings":";;AASA,AAAA;AAAA,eAAA,iBAAAA,WAAA,8BAAAC,qBAAAC,9FAAOK;AAAP,AAAA,IAAAJ,aAAA,mFAAA,AAAAC,8BAAAH,sBAAAC;AAAA,AAAA;AACE,IAAAM,aAAwB,sBAAA,2CAAA,kDAAA,nHAACI;YAAzB,AAAAH,4CAAAD,WAAA,IAAA,nEAAOE;gBAAP,AAAAD,4CAAAD,WAAA,IAAA,vEAAaG;IACPE,aAAW;AAAA,AACE,OAAAC,wBAAA,AAAAC,2BAAA,MAAA,WAAAC;AAAA,AAAA,OAAAF,wBAAA,AAAAC,kfAAA,WAAQE,leAAU,MAAA,NAACC,sBAAyB,qBAAA,2CAAA,2DAAA,2CAAA,eAAA,2BAAA,uDAAA,OAAA,9QAACC,oUAEe,eAAA,fAACC,wBAA4B,AAAA,gFAAMV;AAF/F,AAAA,OAAAI,wBAAA,AAAAC,6CAAA,WAGQM,7BAAS,AAAOJ;AAHxB,AAAA,OAAAH,wBAAA,AAAAC,uOAAA,WAIQO,vNAAK,qHAAA,2EAAA,hMAACC,0DAAQF;AAJtB,AAAA,OAAAN,2BAKE,iBAAAS,WAAWG;IAAXF,WAAA;IAAAC,WAAuB,AAAA,mFAAOJ;AAA9B,AAAA,0FAAAE,SAAAC,SAAAC,gCAAAF,SAAAC,SAAAC,tJAACf,0CAAAA,sEAAAA;;;;;;;IAChBiB,gBAAc,qEAAA,2IAAA,nKAAK,AAAUC,wEAAwB,AAAA,mFAAOnB;AARlE,AA0JG,OAAA,AAAA4B,qCAAA,MAAA,iBAAAC,WAAA,EAAA,YAAA;AAAA,AAAAA;KAhJM,kBAAI,AAAA,mFAAO7B,sIACUkB,9EA+I3B,AAAA,AAAAU,qCAAA,IAAA,iBAAAE,WAAA,EAAA,vHAKA,AAAA,AAAAF,qCAAA,MAAA;AALA,AAAAE;KA/I0CZ,iLAEf,AAAA,mFAAA,pMA6I3B,AAAA,AAAAU,qCAAA,QAAA,iBAAAG,WAAA,EAAA,QAAA,AAAAC,qKAAA,WAAA,WAAAT,9TAKA,AAAA,AAAAK,qCAAA,MAAA;AAjJgC,IAAAR,WAAWH,fA4I3C;IA5IgCI,WAAA;IAAAC,WAAsB,AAAA,AAAAC;AAAtB,AAAA,0FAAAH,SAAAC,SAAAC,gCAAAF,SAAAC,SAAAC,tJAACrB,0CAAAA,sEAAAA;GA4IjC,YAAA,mDAAA,cAAA;AAAA,AAAA8B;MAAA,AAAA,AAAAH,qCAAA,SAAA,iBAAAK,WAAA,EAAA,UAAA;AAzIgC,OAAC9B,PAyIjC;GAAA,YAAA;AAAA,AAAA8B;KAAA;;AA3JL,AAAA,GAAA,AAAAtC;AAAA,IAAAC,WAAAN;AAAA,AAAA,CAAA,AAAAM,uBAAA;;AAAAA;;AAAAN;;;;AAAA;AAAA;AAAOO,AAsBP,gBAAA,hBAAe2B;AAAf,AAEE,IAAMC,OAAK,AAACC,gDAAgB,wBAAA,xBAACC;AAA7B,AACE,OAASF,iDAAQ5B,rCAuBR,AAAA,AAAA+B,kDAAA","names":["G__30563","props__27969__auto__","maybe-ref__27970__auto__","vec__30564","helix.core/extract-cljs-props","goog/DEBUG","G__30584","app.core/app","vec__30567","cljs.core.nth","state","set-state","helix.hooks/use-state","fetch-slug","promesa.protocols/-mcat","promesa.protocols/-promise","___30182__auto__","_response","js/fetch","cljs.core/clj->js","js/JSON.stringify","response","data","cljs.core.js__GT_clj","G__30570","G__30571","G__30572","cljs.core/assoc","redirect-link","js/window.location","G__30579","G__30580","G__30581","p1__30561#","app.core/init","root","js/module$node_modules$react_dom$client.createRoot","js/document.getElementById","helix.core/get-react","obj30574","obj30576","obj30578","helix.impl.props/or-undefined","obj30583"],"sourcesContent":["(ns app.core\n  (:require\n    [\"react-dom/client\" :as rdom]\n    [helix.core :refer [defnc $]]\n    [helix.dom :as d]\n    [helix.hooks :as hooks]\n    [promesa.core :as p]))\n\n\n(defnc app []\n  (let [[state set-state] (hooks/use-state {:url \"\"})\n        fetch-slug (fn []\n                     (p/let [_response (js/fetch \"/api/redirect\" (clj->js {:headers {\"Content-Type\" \"application/json\"}\n                                                                           :method \"POST\"\n                                                                           :body (js/JSON.stringify #js {:url (:url state)})}))\n                             response (.json _response)\n                             data (js->clj response :keywordize-keys true)]\n                       (set-state assoc :slug (:slug data))))\n        redirect-link (str (.-origin js/window.location) \"/\" (:slug state) \"/\")]\n    (d/div {:class-name \"bg-pink-100 grid place-items-center h-screen\"}\n           (if (:slug state)\n             (d/div (d/a {:href redirect-link} redirect-link))\n             (d/div\n               (d/input {:value (:name :url)\n                         :on-change #(set-state assoc :url (.. % -target -value))\n                         :class-name \"form-control border border-solid border-gray-600\"\n                         :placeholder \"Enter a url\"})\n               (d/button {:on-click #(fetch-slug)\n                          :class-name \"border-2 rounded uppercase\"} \"Shorten Url\"))))))\n\n\n(defn ^:export init\n  []\n  (let [root (rdom/createRoot (js/document.getElementById \"app\"))]\n    (.render root ($ app))))\n"]}